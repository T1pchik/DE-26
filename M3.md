## 7. Zabbix
- HQ-SRV
```tcl
sudo sed -i '1i address=/mon.au-team.irpo/192.168.1.10' /etc/dnsmasq.conf
systemctl restart dnsmasq
apt-get update
apt-get install docker-engine docker-compose-v2 -y
systemctl enable --now docker
docker pull mariadb
docker pull postgres
tee /root/zabbix.yml > /dev/null << 'EOF'
services:
  zabbix-postgres:
    container_name: zabbix-postgres
    image: postgres:16
    volumes:
      - postgres-zabbix:/var/lib/postgresql/data
    environment:
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: zabbix
    restart: unless-stopped
  zabbix-server:
    container_name: zabbix-server
    image: zabbix/zabbix-server-pgsql
    environment:
      DB_SERVER_HOST: zabbix-postgres
      DB_SERVER_PORT: 5432
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: zabbix
    ports:
      - "10051:10051"
    restart: unless-stopped
    depends_on:
      - zabbix-postgres
  zabbix-web:
    container_name: zabbix-web
    image: zabbix/zabbix-web-nginx-pgsql
    environment:
      DB_SERVER_HOST: zabbix-postgres
      DB_SERVER_PORT: 5432
      POSTGRES_DB: zabbix
      POSTGRES_USER: zabbix
      POSTGRES_PASSWORD: zabbix
      ZBX_SERVER_HOST: zabbix-server
      ZBX_SERVER_PORT: 10051
      PHP_TZ: Asia/Yekaterinburg
    ports:
      - "8080:8080"
    restart: unless-stopped
    depends_on:
      - zabbix-postgres
volumes:
  postgres-zabbix:
EOF
docker compose -f zabbix.yml up -d
```
- HQ-CLI
```tcl
http://mon.au-team.irpo:8080
Admin
zabbix
```
- HQ-SRV / BR-SRV
```tcl
apt-get update
apt-get install zabbix-agent â€“y
vim /etc/zabbix/zabbix_agentd.conf
	ServerActive=192.168.1.10
	Server=0.0.0.0/0
systemctl enable --now zabbix_agentd.service 
systemctl restart zabbix_agentd.service
```
- HQ-SRV
```tcl
systemctl restart zabbix_agentd.service
```
